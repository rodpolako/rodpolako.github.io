<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>Chess PGN Trainer</title>
	<base href="../" />

	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

	<!-- Needed external includes -->
	<!-- CSS Scheme for application overall (everything except the chessboard itself) -->
	<link rel="stylesheet" href="/assets/pagestyle.css">

	<!-- Local custom copy of Chessboard.css to enable overriding the default colors with Lichess colors instead 
		TODO: See about adding ability to define colors	-->
	<link rel="stylesheet" href="/assets/chessboard-1.0.0.css">

	<!-- JQuery include (required for chessboard.js) -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>

	<!-- JQuery UI (needed for showing the pawn promotion dialog) -->
	<link href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" rel="stylesheet">
	<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

	<!-- Local custom copy of Chessboard.js to enable use of different piece sets 
		TODO: See about adding ability to define piece sets	-->
	<script src="/assets/chessboard-1.0.0-custom.js"></script>

	<!-- Local copy of chess.js -->
	<script src="./assets/chess.js"></script>

	<!-- Add PGN Parser library -->
	<!-- Needed to do it this way since I'm a moron and couldn't figure out another way -->
	<script src="./assets/index.umd.js" type="text/javascript"></script>

</head>

<body onload='resetgame();'>

	<!-- Main layout -->
	<table class="center" style="width: 1000px;">

		<tr>
			<td>
				<table style="width: 662px; height: 650px">
					<tr>
						<td>
							<div id="blankboard" class="chessboard" style="display: none;"></div>
							<div id="myBoard" class="chessboard"></div>

							<div id="promotion-dialog" style="display: none;">
								<ol id="promote-to">
									<li class="ui-state-default"><span class="piece-name">q</span><img
											class="promotion-piece-q promotion-piece" /></li>
									<li class="ui-state-default"><span class="piece-name">r</span><img
											class="promotion-piece-r promotion-piece" /></li>
									<li class="ui-state-default"><span class="piece-name">n</span><img
											class="promotion-piece-n promotion-piece" /></li>
									<li class="ui-state-default"><span class="piece-name">b</span><img
											class="promotion-piece-b promotion-piece" /></li>
								</ol>
							</div>
						</td>

						<td style="width: 12px;">
							<table>
								<tr>
									<td style="height: 20px;">
										<span id="topmove" class="dotBLACK"></span>
									</td>
								</tr>
								<tr>
									<td style="height: 550px;"></td>
								</tr>
								<tr>
									<td style="height: 20px;">
										<span id="bottommove" class="dotWHITE"></span>
									</td>
								</tr>
							</table>
						</td>

					</tr>
				</table>
			</td>

			<td style="width: 338px;">

				<table class="maxwidth">
					<th id='Title' colspan="2" style="height: 50px">Chess PGN Trainer</th>

					<tr>
						<td colspan="2" class="tdspacer1"> </td>
					</tr>


					<tr>
						<td class="tdspacer2">
							<button type="button" id="openPGN_button" class="button">Open PGN file</button>
							<input type="file" id="openPGN" accept=".pgn" onchange="loadPGNFile()"
								style="display: none;" />
						</td>

						<td class="tdspacer2">
							<button id="btn_reset" class="button">Reset</button>
						</td>

					</tr>

					<tr>
						<td colspan="2"> </td>
					</tr>

					<tr>
						<td colspan="2" class="tdspacer2"> </td>
					</tr>

					<tr>
						<td class="tdspacer1">
							<label class="container">Play both sides
								<input type="checkbox" id="playbothsides">
								<span class="checkmark"></span>
							</label>
						</td>
						<td class="tdspacer1">
							<label class="container">Play opposite side
								<input type="checkbox" id="playoppositeside">
								<span class="checkmark"></span>
							</label>
						</td>
					</tr>

					<tr>
						<td class="tdspacer1">
							<label class="container">Randomize
								<input type="checkbox" id="randomizeSet">
								<span class="checkmark"></span>
							</label>
						</td>
						<td class="tdspacer1">
							<label class="container">Flipped
								<input type="checkbox" id="flipped">
								<span class="checkmark"></span>
							</label>
						</td>
					</tr>
					
					<tr>
						<td colspan="2" class="tdspacer1"> </td>
					</tr>

					<tr>
						<td colspan="2" class="tdspacer2">
							<div>Puzzle <span id="puzzleNumber" class="puzzlenumbers"></span> of <span
									id="puzzleNumbertotal" class="puzzlenumbers"></span></div>
							<div id="progressbar"></div>
						</td>
					</tr>

					<tr>
						<td colspan="2" class="puzzletitle">
							Puzzle Name:
							<span id="puzzlename" style="font-weight: bold;"></span>
						</td>
					</tr>

					<tr>
						<td colspan="2" class="tdspacer1"> </td>
					</tr>

					<tr>
						<td colspan="2">
							<button id="btn_starttest" class="button" disabled="true">Start</button>
							<button id="btn_pause" class="button" style="display: none">Pause</button>
							<button id="btn_restart" class="button" style="display: none">Restart</button>
						</td>
					</tr>

					<tr>
						<td colspan="2" class="tdspacer1"> </td>
					</tr>
					<tr>
						<td colspan="2" class="tdspacer4">
							<div id="messagecomplete"></div>
							<div id="errors"></div>
							<div id="errorRate"></div>
							<div id="elapsedTime"></div>
							<div id="avgTime"></div>
						</td>
					</tr>
				</table>
			</td>
		</tr>

	</table>

	<!-- Custom code for this project (needs to be here AFTER elements are built & labelled)-->
	<script src="./assets/Chess-PGN-Trainer.js"></script>

</body>

</html>